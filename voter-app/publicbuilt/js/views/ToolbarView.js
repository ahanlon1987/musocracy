define(["jquery","underscore","backbone","templates","util/dispatcher"],function(e,t,n,r,i){return n.View.extend({events:{"click .icon-refresh":"refresh","click .refresh":"refresh"},initialize:function(){this.title=this.options.title||"Musocracy",this.searchShown=!1},render:function(){var e={title:this.title};return this.$el.html(r.toolbar.render(e)),this},showLocation:function(e){this.$(".brand").text(e),this.$(".back").show()},showHome:function(){this.$(".brand").text("Musocracy"),this.$(".back").hide()},refresh:function(e){e&&e.preventDefault(),this.startRefreshRotation(),i.trigger(i.events.REFRESH)},startRefreshRotation:function(){var e=0,t=this.$(".icon-refresh"),n=function(){e+=10,t.css("transform","rotate("+e+"deg)"),e!==360&&setTimeout(n,25)};n()},toggleSearch:function(e){e&&e.preventDefault(),this.searchShown?this.showSearch():this.hideSearch()},showSearch:function(){this.$(".search").show(),i.trigger(i.events.SHOW_SEARCH)},hideSearch:function(){this.$(".search").hide(),i.trigger(i.events.HIDE_SEARCH)},clearSearch:function(){this.$(".search input").val(""),i.trigger(i.events.CLEAR_SEARCH)}})});