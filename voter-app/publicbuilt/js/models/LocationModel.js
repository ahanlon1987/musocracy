define(["underscore","backbone","collections/VotesCollection"],function(e,t,n){return t.Model.extend({initialize:function(e,t){this.locationId=t.locationId,this.on("reset",this.onReset,this)},url:function(){return"/location/"+this.locationId},onReset:function(){this.set("votes",new n(this.attributes.votes))},getVotes:function(){var e=this.get("votes");return e instanceof n||(e=new n(e),this.set("votes",e)),e},getNowPlaying:function(){return this.get("nowPlaying")},getUpNext:function(){return this.get("upNext")}})});